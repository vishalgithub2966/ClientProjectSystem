@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

@model IEnumerable<ClientMSystem.Models.WeekData> // Show List  data on view
@{
    ViewData["Title"] = "Index";
}

<div class="container" id="myForm" onsubmit="sendForm(event)">
    <div class="col-12">
        <!--Divide screen into 8 col-->
        <h1 class="text-center text-primary" style=" font-family: Georgia, serif;font:italic,bold;">
            Week Data
        </h1>&nbsp;

        @if (Model != null)
        {
            <table class="table table-bordered">
                <tr class="text-center">
                    <th>ID</th>
                    <th>Date</th>
                    <th>Day</th>
                    <th>Task</th>
                    <th>Hours</th>
                    <th>UserName</th>

                    
                </tr>
                @foreach (var d in Model)
                {
                    <tr class="text-center">
                        <td>@d.Id</td>
                        <td>@d.Date</td>
                        <td>@d.Day</td>
                        <td>@d.Hours</td>
                        <td>@d.Task</td>
                        <td>@d.UserName</td>


                        

                        <td style="display: flex; justify-content: space-between;">

                            <a class="btn btn-sm btn-warning" style="margin-right:5px;" role="button" asp-controller="WeeklyData" asp-action="Edit" asp-route-id="@d.Id">Edit Sheet</a>

                            <a class="btn btn-sm btn-success" style="margin-right:5px;" role="button" asp-controller="WeeklyData" asp-action="Createpdf" asp-route-id="@d.Id">Create PDF</a>

                            <a class="btn btn-sm btn-danger" style="margin-right:5px;" role="button" asp-controller="WeeklyData" asp-action="Delete" asp-route-id="@d.Id">Delete Sheet</a>
                            <a class="btn btn-sm btn-primary" role="button" value="Alert Message" name="Request for Approval" id="btnAlertMessage" asp-controller="Request" asp-action="Send" asp-route-id="@d.Id">Request for Approval</a>
                        </td>
                    </tr>
                }
            </table>
        }
        <a class="btn btn-sm btn-success m-4" asp-controller="WeeklyData" asp-action="Create">Add new Update</a>
        <a class="btn btn-sm btn-success m-4" asp-controller="WeeklyData" asp-action="CreateExcel">Create Excel</a>
        @*<div>
            <a class="btn btn-sm btn-warning" asp-controller="WeeklyData" asp-action="CreateExcel">Create Excel</a>
        </div>*@
        <p class="text-center text-success">@TempData["error"]</p>
        @await Html.PartialAsync("_NotificationPartial")
    </div>
</div>
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="sweetalert2.min.js"></script>
<link rel="stylesheet" href="sweetalert2.min.css">


@section scripts{
        <script type="text/javascript">
            $("#btnAlertMessage").click(function(){
                swal({
                    title="Confirmation?",
                    text:"Are you want to send the request for approval?",
                    type:'warning',
                    showCancelButton:true,
                    confirmButtonClass:"btn-primary",
                    confirmButtonText:"Yes,Please send it",
                    cancelButtonText:"No,Don't send it",
                    closeOnConfirm:false,
                    closeOnConfirm:false

                },
                function(isConfirm){
                    if(isConfirm){
                        swal("Sent!","Request has been successfully sent","success");
                    }
                    else{
                        swal("Cancelled","Your data is safe now ","error");
                    }
                });
            })
        </script>
}

